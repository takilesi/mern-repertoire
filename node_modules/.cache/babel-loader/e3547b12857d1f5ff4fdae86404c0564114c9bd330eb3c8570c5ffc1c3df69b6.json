{"ast":null,"code":"import _regeneratorRuntime from\"/Users/douglasdeckert/PerScholas/93_RTT/mod-three/mern-rep/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/douglasdeckert/PerScholas/93_RTT/mod-three/mern-rep/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getToken}from'./users-service';var BASE_URL='http://localhost:3001/api/users';export function signUp(userData){return sendRequest(BASE_URL,'POST',userData);}export function login(credentials){return sendRequest(\"\".concat(BASE_URL,\"/login\"),'POST',credentials);}export function checkToken(){return sendRequest(\"\".concat(BASE_URL,\"/check-token\"));}/*--- Helper Functions ---*/function sendRequest(_x){return _sendRequest.apply(this,arguments);}function _sendRequest(){_sendRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,payload,options,token,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';payload=_args.length>2&&_args[2]!==undefined?_args[2]:null;// Fetch accepts an options object as the 2nd argument\n// used to include a data payload, set headers, etc.\noptions={method:method};if(payload){options.headers={'Content-Type':'application/json'};options.body=JSON.stringify(payload);}token=getToken();if(token){// Ensure the headers object exists\noptions.headers=options.headers||{};// Add token to an Authorization header\n// Prefacing with 'Bearer' is recommended in the HTTP specification\noptions.headers.Authorization=\"Bearer \".concat(token);}_context.next=8;return fetch(url,options);case 8:res=_context.sent;if(!res.ok){_context.next=11;break;}return _context.abrupt(\"return\",res.json());case 11:throw new Error('Bad Request');case 12:case\"end\":return _context.stop();}},_callee);}));return _sendRequest.apply(this,arguments);}","map":{"version":3,"names":["getToken","BASE_URL","signUp","userData","sendRequest","login","credentials","concat","checkToken","_x","_sendRequest","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","method","payload","options","token","res","_args","wrap","_callee$","_context","prev","next","length","undefined","headers","body","JSON","stringify","Authorization","fetch","sent","ok","abrupt","json","Error","stop"],"sources":["/Users/douglasdeckert/PerScholas/93_RTT/mod-three/mern-rep/src/utilities/users-api.js"],"sourcesContent":["import { getToken } from './users-service';\nconst BASE_URL = 'http://localhost:3001/api/users';\n\nexport function signUp(userData) {\n  return sendRequest(BASE_URL, 'POST', userData);\n}\n\nexport function login(credentials) {\n  return sendRequest(`${BASE_URL}/login`, 'POST', credentials);\n}\n\nexport function checkToken() {\n  return sendRequest(`${BASE_URL}/check-token`);\n}\n\n/*--- Helper Functions ---*/\n\nasync function sendRequest(url, method = 'GET', payload = null) {\n  // Fetch accepts an options object as the 2nd argument\n  // used to include a data payload, set headers, etc.\n  const options = { method };\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n\n  const token = getToken();\n  if (token) {\n    // Ensure the headers object exists\n    options.headers = options.headers || {};\n    // Add token to an Authorization header\n    // Prefacing with 'Bearer' is recommended in the HTTP specification\n    options.headers.Authorization = `Bearer ${token}`;\n  }\n  const res = await fetch(url, options);\n  // res.ok will be false if the status code set to 4xx in the controller action\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}"],"mappings":"gTAAA,OAASA,QAAQ,KAAQ,iBAAiB,CAC1C,GAAM,CAAAC,QAAQ,CAAG,iCAAiC,CAElD,MAAO,SAAS,CAAAC,MAAMA,CAACC,QAAQ,CAAE,CAC/B,MAAO,CAAAC,WAAW,CAACH,QAAQ,CAAE,MAAM,CAAEE,QAAQ,CAAC,CAChD,CAEA,MAAO,SAAS,CAAAE,KAAKA,CAACC,WAAW,CAAE,CACjC,MAAO,CAAAF,WAAW,IAAAG,MAAA,CAAIN,QAAQ,WAAU,MAAM,CAAEK,WAAW,CAAC,CAC9D,CAEA,MAAO,SAAS,CAAAE,UAAUA,CAAA,CAAG,CAC3B,MAAO,CAAAJ,WAAW,IAAAG,MAAA,CAAIN,QAAQ,gBAAc,CAAC,CAC/C,CAEA,oCAEe,CAAAG,WAAWA,CAAAK,EAAA,SAAAC,YAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,aAAA,EAAAA,YAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAA1B,SAAAC,QAA2BC,GAAG,MAAAC,MAAA,CAAAC,OAAA,CAAAC,OAAA,CAAAC,KAAA,CAAAC,GAAA,CAAAC,KAAA,CAAAX,SAAA,QAAAE,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAEV,MAAM,CAAAK,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,KAAK,CAAEJ,OAAO,CAAAI,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,IAAI,CAC5D;AACA;AACMH,OAAO,CAAG,CAAEF,MAAM,CAANA,MAAO,CAAC,CAC1B,GAAIC,OAAO,CAAE,CACXC,OAAO,CAACW,OAAO,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACxDX,OAAO,CAACY,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACf,OAAO,CAAC,CACxC,CAEME,KAAK,CAAGrB,QAAQ,CAAC,CAAC,CACxB,GAAIqB,KAAK,CAAE,CACT;AACAD,OAAO,CAACW,OAAO,CAAGX,OAAO,CAACW,OAAO,EAAI,CAAC,CAAC,CACvC;AACA;AACAX,OAAO,CAACW,OAAO,CAACI,aAAa,WAAA5B,MAAA,CAAac,KAAK,CAAE,CACnD,CAACK,QAAA,CAAAE,IAAA,SACiB,CAAAQ,KAAK,CAACnB,GAAG,CAAEG,OAAO,CAAC,QAA/BE,GAAG,CAAAI,QAAA,CAAAW,IAAA,KAELf,GAAG,CAACgB,EAAE,EAAAZ,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAa,MAAA,UAASjB,GAAG,CAACkB,IAAI,CAAC,CAAC,eACvB,IAAI,CAAAC,KAAK,CAAC,aAAa,CAAC,0BAAAf,QAAA,CAAAgB,IAAA,MAAA1B,OAAA,GAC/B,UAAAN,YAAA,CAAAC,KAAA,MAAAC,SAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}